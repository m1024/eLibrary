@using eLibrary.Models
@model IEnumerable<Book>

@{
    ViewBag.Title = null;
}

<h2>FindBook</h2>
@using (Html.BeginForm())
{
    <div ></div>   
        <form role="form" class="form-inline">
            <div class=" form-group">
                <label for="findBook" class="col-sm-2">Поиск</label>
                <input type="text" class="col-sm-6" name="bookName" placeholder="введите наименование книги" id="findBook">
            </div>
            
            <button style="margin-left: 40px; margin-bottom: 20px; vertical-align: middle;" type="submit" class="btn btn-success col-sm-2 btn-xs">Искать</button>
     
        </form>


        <table class="table">
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Name)
                </th>

                <th>
                    @Html.DisplayNameFor(model => model.SerieId)
                </th>

                <th>
                    @Html.DisplayNameFor(model => model.ImprintYear)
                </th>

                <th>
                    @Html.DisplayNameFor(model => model.Annotation)
                </th>

                <th>
                    @Html.DisplayNameFor(model => model.GenreId)
                </th>

                <th>
                    @Html.DisplayNameFor(model => model.Authors)
                </th>
                <th></th>
                <th></th>

            </tr>
            @if (Model != null)
            {
                foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Name)
                        </td>

                        <td>
                            @Html.DisplayFor(modelItem => item.Serie.Name)
                        </td>

                        <td>
                            @Html.DisplayFor(modelItem => item.ImprintYear)
                        </td>

                        <td>
                            @Html.DisplayFor(modelItem => item.Annotation)
                        </td>

                        <td>
                            @Html.DisplayFor(modelItem => item.Genre.Name)
                        </td>

                        <td>
                            @foreach (Author c in item.Authors)
                            {
                                @c.Name
                                @c.Family
                                @c.Patronymic
                            }

                        </td>

                        @if (HttpContext.Current.User.IsInRole("Администратор") || HttpContext.Current.User.IsInRole("Модератор")||
                            HttpContext.Current.User.IsInRole("Пользователь"))
                        {
                            <td>
                                @Html.ActionLink("Загрузить fb2", "../Book/GetFile_fb2", new {id = item.Id}) |
                            </td>
                        }

                        @if (HttpContext.Current.User.IsInRole("Администратор") || HttpContext.Current.User.IsInRole("Модератор"))
                        {
                            <td>
                                @Html.ActionLink("Редактировать", "../Book/Edit", new {id = item.Id}) |
                                @Html.ActionLink("Удалить", "../Book/Delete", new {id = item.Id})
                            </td>
                        }

                    </tr>
                }
            }
        </table>
}