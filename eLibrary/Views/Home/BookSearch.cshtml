@using eLibrary.Models
@model IEnumerable<eLibrary.Models.Book>

<div id="searchresults">
    <div class="row">
        <div class="col-md-10 col-md-offset-1">
            <table class="table">
                <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.SerieId)
                    </th>


                    <th>
                        @Html.DisplayNameFor(model => model.GenreId)
                    </th>

                    <th>
                        @Html.DisplayNameFor(model => model.Authors)
                    </th>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>
                @if (Model != null)
                {
                    <tr>
                        @foreach (var item in Model)
                        {
                            <td>
                                @Html.DisplayFor(modelItem => item.Name)
                            </td>

                            <td>
                                @Html.DisplayFor(modelItem => item.Serie.Name)
                            </td>

                            <td>
                                @Html.DisplayFor(modelItem => item.Genre.Name)
                            </td>

                            <td>
                                @foreach (Author c in item.Authors)
                                {
                                    @c.Name
                                    @c.Family
                                    @c.Patronymic
                                }

                            </td>

                            if (HttpContext.Current.User.IsInRole("Администратор") || HttpContext.Current.User.IsInRole("Модератор") ||
                                HttpContext.Current.User.IsInRole("Пользователь"))
                            {
                                <td>
                                    @Html.ActionLink("Загрузить fb2", "../Book/GetFile_fb2", new { id = item.Id }) |
                                </td>
                            }

                            if (HttpContext.Current.User.IsInRole("Администратор") || HttpContext.Current.User.IsInRole("Модератор"))
                            {
                                <td>
                                    @Html.ActionLink("Редактировать", "../Book/Edit", new { id = item.Id }) |
                                    @Html.ActionLink("Удалить", "../Book/Delete", new { id = item.Id })
                                </td>
                            }
                            <td>
                                @Html.ActionLink("Подробнее", "../Book/ShowBook", new { id = item.Id })
                            </td>
                        }
                    </tr>

                }

            </table>
        </div>
    </div>
</div>